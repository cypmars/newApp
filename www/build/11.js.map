{"version":3,"sources":["../../src/pages/chat2/chat2.module.ts","../../src/pages/chat2/chat2.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { Chat2Page } from './chat2';\r\nimport { TextToSpeech } from '@ionic-native/text-to-speech';\r\nimport { SpeechRecognition } from '@ionic-native/speech-recognition';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Chat2Page,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(Chat2Page)\r\n  ],\r\n  exports: [\r\n    Chat2Page\r\n  ]\r\n})\r\nexport class Chat2PageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat2/chat2.module.ts","import { Component, ChangeDetectorRef } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController, Platform, Content } from 'ionic-angular';\r\nimport { FormControl, FormBuilder } from '@angular/forms';\r\nimport { WelcomePage } from '../pages';\r\nimport { TextToSpeech } from '@ionic-native/text-to-speech';\r\nimport { SpeechRecognition, SpeechRecognitionListeningOptionsAndroid, SpeechRecognitionListeningOptionsIOS } from '@ionic-native/speech-recognition';\r\n/**\r\n * The Welcome Page is a splash page that quickly describes the app,\r\n * and then directs the user to create an account or log in.\r\n * If you'd like to immediately put the user onto a login/signup page,\r\n * we recommend not using the Welcome page.\r\n*/\r\n\r\ndeclare var ApiAIPlugin: any;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-chat2',\r\n  templateUrl: 'chat2.html'\r\n})\r\n\r\nexport class Chat2Page {\r\n  \r\n  text: string;\r\n  speechList : Array<string> = [];\r\n\r\n  toUser = {\r\n    _id: '534b8e5aaa5e7afc1b23e69b',\r\n    pic: 'assets/img/bot.png',\r\n    username: 'BoBot',\r\n  };\r\n\r\n  user = {\r\n    _id: '534b8fb2aa5e7afc1b23e69c',\r\n    pic: 'assets/img/logo2.png',\r\n    username: 'Sandy',\r\n  };\r\n\r\n  messages : Array<object> = [\r\n    {\r\n      toId: this.user._id,\r\n      _id: 1,\r\n      date: new Date().toLocaleTimeString().replace(/:\\d+ /, ' '),\r\n      userId: this.toUser._id,\r\n      username: this.toUser.username,\r\n      pic: this.toUser.pic,\r\n      text: {\r\n        speech: \"Salut ! Je suis BoBot, je vais t'aider à déterminer ton besoin.\"\r\n      }\r\n    },\r\n    {\r\n      toId: this.user._id,\r\n      _id: 2,\r\n      date: new Date().toLocaleTimeString().replace(/:\\d+ /, ' '),\r\n      userId: this.toUser._id,\r\n      username: this.toUser.username,\r\n      pic: this.toUser.pic,\r\n      text: {\r\n        speech: \"Es-tu un client, un prospect ou un collaborateur ?\"\r\n      }\r\n    }\r\n  ];\r\n\r\n  androidOptions: SpeechRecognitionListeningOptionsAndroid;\r\n  iosOptions: SpeechRecognitionListeningOptionsIOS;\r\n  textBody: string;\r\n  voiceBody: string;\r\n  alternate: boolean;\r\n  hideTime: boolean;\r\n  verbalResponse: boolean;\r\n  newMessage: {};\r\n  responseMessage: {};\r\n\r\n  constructor(private ref: ChangeDetectorRef, private speech: SpeechRecognition, private tts: TextToSpeech, public navCtrl: NavController, public platform: Platform) {\r\n      ApiAIPlugin.init(\r\n      {\r\n          clientAccessToken: \"099b97242c1745bd92c163cd27d2c767\", \r\n          lang: \"en\" // set lang tag from list of supported languages \r\n      }, \r\n      function(result) { /* success processing */ },\r\n      function(error) { /* error processing */ }\r\n      );\r\n      this.initializeApp()\r\n      this.hideTime = true;\r\n      this.verbalResponse = true;\r\n  }\r\n\r\n\r\n  initializeApp() {\r\n    this.platform.ready().then(() => {\r\n      if(!this.hasPermission()){\r\n        this.getPermission()\r\n      }\r\n    });\r\n  }\r\n\r\n  async SpeakText(voice):Promise<any> {\r\n    try{\r\n      await this.tts.speak(voice);\r\n      console.log(\"Successfully spoke\")\r\n    }\r\n    catch(e){\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  listenForSpeech():void {\r\n    this.androidOptions = {\r\n        prompt: 'Speak into your phone!',\r\n        matches: 1\r\n    };\r\n\r\n    this.iosOptions = {\r\n        matches: 1\r\n    };\r\n\r\n    if(this.platform.is('android')){\r\n      this.speech.startListening(this.androidOptions).subscribe(\r\n        (data) => {\r\n          this.messages.push(\r\n            {\r\n              toId: this.toUser._id,\r\n              _id: this.messages.length,\r\n              date: new Date().toLocaleTimeString().replace(/:\\d+ /, ' '),\r\n              userId: this.user._id,\r\n              username: this.user.username,\r\n              pic: this.user.pic,\r\n              text: data\r\n            }\r\n          );\r\n          this.SendTextFromVoice(data)\r\n      }, (error) => {\r\n          console.log(error)\r\n      });\r\n    }\r\n    else if(this.platform.is('ios')){\r\n      this.speech.startListening(this.iosOptions).subscribe(data => this.speechList = data, error => console.log(error));\r\n      console.log(this.speechList);\r\n    }\r\n  }\r\n\r\n  async SendText(query):Promise<any> {\r\n    try {\r\n        await ApiAIPlugin.requestText(\r\n          {\r\n            query,\r\n            originalRequest: {\r\n              source: 'WWT chat bot',\r\n              data: 'messages'\r\n            }\r\n          },\r\n           (response) => {\r\n             console.log(JSON.stringify(response))\r\n             console.log(JSON.stringify(response.result))\r\n             let speech = response.result.fulfillment;\r\n               if(response.result.fulfillment.speech){\r\n                 console.log(speech);\r\n                 if(this.platform.is('ios')){\r\n                    this.messages.push({\r\n                      toId: this.user._id,\r\n                      _id: this.messages.length,\r\n                      date: new Date().toLocaleTimeString().replace(/:\\d+ /, ' '),\r\n                      userId: this.toUser._id,\r\n                      username: this.toUser.username,\r\n                      pic: this.toUser.pic,\r\n                      text: speech\r\n                    });\r\n                  this.ref.detectChanges();\r\n                } else {\r\n                  this.messages.push({      \r\n                    toId: this.user._id,\r\n                    _id: 2,\r\n                    date: new Date().toLocaleTimeString().replace(/:\\d+ /, ' '),\r\n                    userId: this.toUser._id,\r\n                    username: this.toUser.username,\r\n                    pic: this.toUser.pic,\r\n                    text: speech\r\n                  });\r\n                  this.ref.detectChanges();\r\n                }\r\n               } else {\r\n                 this.messages.push({\r\n                  toId: this.user._id,\r\n                  _id: 2,\r\n                  date: new Date().toLocaleTimeString().replace(/:\\d+ /, ' '),\r\n                  userId: this.toUser._id,\r\n                  username: this.toUser.username,\r\n                  pic: this.toUser.pic,\r\n                  text: \"Je suis désolé, je n'ai pas compris votre réponse.\"\r\n                });\r\n                this.ref.detectChanges();\r\n               }\r\n            },\r\n            (error) => {\r\n                console.error(error);\r\n            });\r\n    } catch (e) {\r\n        alert(e);\r\n    }\r\n  }\r\n\r\n  async SendTextFromVoice(query):Promise<any> {\r\n    try {\r\n        await ApiAIPlugin.requestText(\r\n          {\r\n            query\r\n          },\r\n           (response) => {\r\n             if(response.result.fulfillment.speech){\r\n                let voice = response.result.fulfillment.speech\r\n                console.log('3', voice)\r\n                this.messages.push({\r\n                  toId: this.user._id,\r\n                  _id: 2,\r\n                  date: new Date().toLocaleTimeString().replace(/:\\d+ /, ' '),\r\n                  userId: this.toUser._id,\r\n                  username: this.toUser.username,\r\n                  pic: this.toUser.pic,\r\n                  text: voice\r\n                });\r\n                this.ref.detectChanges();\r\n                this.SpeakText(voice)\r\n             } else {\r\n               let voice = \"Je suis désolé, je n'ai pas compris votre réponse\"\r\n                console.log('3', voice)\r\n                this.messages.push({\r\n                  toId: this.user._id,\r\n                  _id: 2,\r\n                  date: new Date().toLocaleTimeString().replace(/:\\d+ /, ' '),\r\n                  userId: this.toUser._id,\r\n                  username: this.toUser.username,\r\n                  pic: this.toUser.pic,\r\n                  text: voice\r\n                });\r\n                this.ref.detectChanges();\r\n                this.SpeakText(voice)\r\n             }\r\n            },\r\n            (error) => {\r\n                console.error(error);\r\n            });\r\n    } catch (e) {\r\n        alert(e);\r\n    }\r\n    }\r\n\r\n  async getSupportedLanguages():Promise<Array<string>> {\r\n    try{\r\n      const languages = await this.speech.getSupportedLanguages();\r\n      console.log(languages);\r\n      return languages;\r\n    }\r\n    catch(e){\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  async hasPermission():Promise<boolean> {\r\n    try{\r\n      const permission = await this.speech.hasPermission();\r\n      console.log(permission)\r\n      return permission;\r\n    }\r\n    catch(e){\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  async getPermission():Promise<void> {\r\n    try{\r\n      const permission = await this.speech.requestPermission();\r\n      console.log(permission)\r\n      return permission;\r\n    }\r\n    catch(e){\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  async isSpeechSupported():Promise<boolean> {\r\n    const isAvailable = await this.speech.isRecognitionAvailable();\r\n    console.log(isAvailable)\r\n    return isAvailable;\r\n  }\r\n\r\n  async sendMessage():Promise<any> {\r\n\r\n    this.messages.push({\r\n      toId: this.toUser._id,\r\n      _id: this.messages.length,\r\n      date: new Date().toLocaleTimeString().replace(/:\\d+ /, ' '),\r\n      userId: this.user._id,\r\n      username: this.user.username,\r\n      pic: this.user.pic,\r\n      text: this.newMessage\r\n    });\r\n    this.SendText(this.newMessage);\r\n    console.log(this.newMessage);\r\n    this.newMessage=\"\";\r\n  }\r\n\r\n  buildCardLayout(data) {\r\n      \r\n  }\r\n\r\n  \r\n  login() {\r\n    \r\n    this.navCtrl.push('WelcomePage');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat2/chat2.ts"],"sourceRoot":""}